<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- Lock zoom & fit device width -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <title>AD Arcade: Retro DX Ball — 2025 Edition</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
  </style>
</head>
<body class="theme-galaxy no-scroll">
  <!-- ===== HUD (fixed) ===== -->
  <header id="hud">
    <div class="brand">AD Arcade: Retro DX Ball</div>
    <div class="stats">
      <span>Score: <strong id="score">0</strong></span>
      <span>Lives: <strong id="lives">3</strong></span>
      <span>Level: <strong id="level">1</strong></span>
      <span>High: <strong id="high">0</strong></span>
    </div>
    <div class="controls">
      <select id="themeSelect" aria-label="Theme">
        <option value="theme-galaxy" selected>🌌 Galaxy</option>
        <option value="theme-neon">🌟 Neon</option>
        <option value="theme-ice">❄️ Ice</option>
        <option value="theme-inferno">🔥 Inferno</option>
      </select>
      <label class="toggle" title="Music"><input type="checkbox" id="musicToggle" checked /> 🎶</label>
      <label class="toggle" title="SFX"><input type="checkbox" id="sfxToggle" checked /> 🔊</label>
      <button id="btnMenu" class="btn">☰ Menu</button>
      <button id="restartBtn" class="btn">↺ Restart</button>
    </div>
  </header>

  <!-- ===== Viewport-filling game area ===== -->
  <main id="gameWrap">
    <canvas id="game"></canvas>
    <!-- Ball trail is drawn on the same canvas; particles too -->

    <!-- Countdown & fades -->
    <div id="fadeOverlay" class="hidden"></div>
    <div id="countdown" class="hidden">3</div>

    <!-- Game Over modal -->
    <div id="modal" class="hidden" role="dialog" aria-modal="true">
      <div class="card">
        <h2>🏁 Game Over</h2>
        <p>Score: <span id="finalScore">0</span></p>
        <button id="playAgain" class="btn">Play Again</button>
        <button id="gotoMenu" class="btn">Main Menu</button>
      </div>
    </div>
  </main>

  <!-- ===== Home Menu ===== -->
  <section id="home" class="screen visible">
    <div class="home-card glass">
      <h1>Retro DX Ball — 2025</h1>
      <div class="row">
        <div class="col">
          <h3>Theme</h3>
          <div class="theme-grid">
            <button class="theme-thumb theme-galaxy selected" data-theme="theme-galaxy">Galaxy</button>
            <button class="theme-thumb theme-neon" data-theme="theme-neon">Neon</button>
            <button class="theme-thumb theme-ice" data-theme="theme-ice">Ice</button>
            <button class="theme-thumb theme-inferno" data-theme="theme-inferno">Inferno</button>
          </div>
        </div>
        <div class="col">
          <h3>Mode</h3>
          <select id="modeSelect">
            <option value="classic" selected>Classic</option>
            <option value="time">Time Attack (60s)</option>
            <option value="obstacles">Obstacles</option>
          </select>
          <h3>Difficulty</h3>
          <select id="difficulty">
            <option value="1" selected>Easy</option>
            <option value="1.3">Medium</option>
            <option value="1.6">Hard</option>
          </select>
        </div>
      </div>

      <div class="row center">
        <button id="startBtn" class="cta">▶ Start</button>
        <button id="instructionsBtn" class="btn">📖 Instructions</button>
        <button id="leaderboardBtn" class="btn">🏆 Leaderboard</button>
      </div>
    </div>
  </section>

  <!-- ===== Instructions ===== -->
  <section id="instructions" class="screen">
    <div class="home-card glass">
      <h2>How to Play</h2>
      <ul class="bullets">
        <li>Move the paddle with <b>← →</b> keys or tap/hold left/right side on mobile.</li>
        <li>Ball <b>starts on the paddle</b>. After life loss, countdown resumes from the paddle.</li>
        <li>Break all bricks to advance. Ball speed scales each level.</li>
      </ul>
      <h3>Legendary Boosters</h3>
      <div class="legend">
        <div><span class="icon wide"></span> Wide Paddle</div>
        <div><span class="icon life"></span> Extra Life</div>
        <div><span class="icon slow"></span> Slow Ball</div>
        <div><span class="icon multi"></span> Multi-Ball</div>
        <div><span class="icon fire"></span> Fireball</div>
      </div>
      <div class="row center">
        <button class="btn" id="backFromInstructions">← Back</button>
      </div>
    </div>
  </section>

  <!-- ===== Leaderboard ===== -->
  <section id="leaderboard" class="screen">
    <div class="home-card glass">
      <h2>🏆 Trophy Hall</h2>
      <ol id="lbList" class="leader-list"></ol>
      <div class="row center">
        <button class="btn" id="clearLB">Clear</button>
        <button class="btn" id="backFromLB">← Back</button>
      </div>
    </div>
  </section>

  <!-- ===== Audio ===== -->
  <audio id="bgm" loop preload="auto">
    <source src="background.mp3" type="audio/mpeg"/>
  </audio>
  <audio id="sfxBrick" preload="auto"><source src="" type="audio/mpeg"/></audio>
  <audio id="sfxCatch" preload="auto"><source src="" type="audio/mpeg"/></audio>
  <audio id="sfxLife"  preload="auto"><source src="" type="audio/mpeg"/></audio>

  <script src="script.js"></script>
</body>
</html>
